{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'obra/cadObra.css' %}">
{% endblock %}

{% block content %}
<div class="obra-container">
  <h2>Cadastrar Obra</h2>
  
  <!-- Formulário Estilizado -->
  <form method="post" id="obra-form" class="obra-form">
    {% csrf_token %}
    
    <div class="form-group">
      <label for="id_nome">Nome:</label>
      {{ form.nome }}
    </div>
    
    <div class="form-group">
      <label for="id_numero_controle">Número de Controle:</label>
      {{ form.numero_controle }}
    </div>
    
    <div class="form-group">
      <label for="id_endereco">Endereço:</label>
      {{ form.endereco }}
    </div>
    
    <div class="form-group">
      <label for="id_cliente">Nome do Cliente:</label>
      {{ form.cliente }}
    </div>
    
    <button type="submit" class="btn btn-primary">Salvar</button>
  </form>

  <!-- Lista de Obras Cadastradas -->
  <div class="obra-list-container">
    <h3>Obras Cadastradas</h3>
    <table id="obras-table" class="obra-table">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Número</th>
          <th>Data de Agendamento</th>
        </tr>
      </thead>
      <tbody>
        {% for obra in obras %}
        <tr>
          <td>{{ obra.nome }}</td>
          <td>{{ obra.numero_controle }}</td>
          <td>{{ obra.data_agendamento|date:"d/m/Y H:i"|default:"Sem agendamento" }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="3">Nenhuma obra cadastrada</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'obra/cadObra.js' %}"></script>
{% endblock %}